{% extends "base.html" %}
{% block content %}

{% with movie=movie %}
    {% include "_movie_info_box.html" %}
{% endwith %}

<section id="movie_reviews_box">
    {% if reviews %}
        <div class="flex-entry">
            {% for r in reviews %}
                {% with review=r %}
                    {% include "_movie_review_box.html" %}
                {% endwith %}
            {% endfor %}
        </div>
        <a href="{{ url_for('reviews', id=movie.id) }}">Read all reviews</a>
    {% else %}
        <div>No reviews yet...</div>
    {% endif %}
</section>

<section id="custom_review_box">
    <h3>Write your own review:</h3>
    <form action="" method="POST">
        {{ form.hidden_tag() }}
        <p class="custom-review-component">
            {{ form.grade.label }}<br>
            {{ form.grade }}
            {% for e in form.grade.errors %}
                <div class="errormsg">{{ e }}</div>
            {% endfor %}
        </p>
        <div>
            <p>
                {{ form.thoughts.label }}<br>
                {{ form.thoughts(cols=40, rows=8) }}
                {% for e in form.thoughts.errors %}
                    <div class="errormsg">{{ e }}</div>
                {% endfor %}
            </p>
            <p>
                {{ form.feelings.label }}<br>
                {{ form.feelings(cols=40, rows=8) }}
                {% for e in form.feelings.errors %}
                    <div class="errormsg">{{ e }}</div>
                {% endfor %}
            </p>
        </div>
        <p class="custom-review-component">{{ form.submit() }}</p>
    </form>
</section>

{% endblock content %}
